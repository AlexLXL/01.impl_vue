{"version":3,"file":"vue.js","sources":["../../src/utils.js","../../src/observe/array.js","../../src/observe/dep.js","../../src/observe/index.js","../../src/state.js","../../src/compiler/parser.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/observe/watcher.js","../../src/lifeCycle.js","../../src/init.js","../../src/vdom/index.js","../../src/render.js","../../src/index.js"],"sourcesContent":["export function isFunction(val) {\r\n    return typeof val === \"function\";\r\n}\r\n\r\nexport function isObject(val) {\r\n    return typeof val === \"object\" && val !== null;\r\n}\r\n\r\nexport function isArray(val) {\r\n    return Array.isArray(val);\r\n}","let oldArrayPrototype = Array.prototype;\r\n\r\nexport let arrayMethods = Object.create(oldArrayPrototype);\r\n\r\nlet methods = [\"push\", \"shift\", \"pop\", \"unshift\", \"reverse\", \"sort\", \"splice\"];\r\n\r\nmethods.forEach((method) => {\r\n    arrayMethods[method] = function(...args){\r\n        oldArrayPrototype[method].call(this, ...args);\r\n\r\n        // 监控新增的值\r\n        let inserted = null;\r\n        let ob = this.__ob__;\r\n        switch (method) {\r\n            case \"splice\":\r\n                inserted = args.slice(2);\r\n            case \"push\":\r\n            case \"unshift\":\r\n                inserted = args;\r\n                break;\r\n        }\r\n        if (inserted) ob.observeArray(inserted);\r\n    }\r\n})","let id = 0;\r\n\r\nexport class Dep {\r\n    constructor() {\r\n        this.subs = [];\r\n        this.id = id++;\r\n    }\r\n\r\n    depend() {\r\n        Dep.target.addDep(this); // watcher添加dep\r\n    }\r\n    addSub(watcher) {\r\n        this.subs.push(watcher);\r\n    }\r\n    notify() {\r\n        this.subs.forEach(watcher => watcher.update())\r\n    }\r\n}\r\nDep.target = null;","import {isArray, isObject} from \"../utils\";\r\nimport {arrayMethods} from \"./array\";\r\nimport {Dep} from \"./dep\";\r\n\r\nexport function observe(value) {\r\n    if (value.__ob__) return;\r\n    if (!isObject(value)) return;\r\n\r\n    return new Observer(value);\r\n}\r\n\r\nclass Observer {\r\n    constructor(value) {\r\n        Object.defineProperty(value, \"__ob__\", {\r\n            value: this,\r\n            enumerable: false\r\n        })\r\n\r\n        if (isArray(value)) {\r\n            value.__proto__ = arrayMethods;\r\n            this.observeArray(value);\r\n        }else {\r\n            this.walk(value);\r\n        }\r\n    }\r\n\r\n    walk(data) {\r\n        // 监控对象\r\n        Object.keys(data).forEach((key) => {\r\n            defineReactive(data, key, data[key]);\r\n        })\r\n    }\r\n\r\n    observeArray(data) {\r\n        // 监控数组\r\n        data.forEach((item) => observe(item)); // 数组内的引用类型添加监控，[[], {}]\r\n    }\r\n}\r\n\r\nfunction defineReactive(obj, key, value) {\r\n    observe(value); // 递归监控value\r\n    let dep = new Dep();\r\n    Object.defineProperty(obj, key, {\r\n        get() {\r\n            dep.depend();\r\n            return value;\r\n        },\r\n        set(newValue) {\r\n            if (newValue === value) return;\r\n            observe(newValue); // 新值加监控\r\n            value = newValue;\r\n            dep.notify();\r\n        }\r\n    })\r\n}","import {isFunction} from \"./utils\";\r\nimport {observe} from \"./observe/index.js\";\r\n\r\nexport function initState(vm) {\r\n    const opts = vm.$options;\r\n    \r\n    if (opts.data) {\r\n        initData(vm)\r\n    }\r\n}\r\n\r\nfunction initData(vm) {\r\n    let data = vm.$options.data;\r\n    data = vm._data = isFunction(data) ? data.call(vm) : data;\r\n    observe(data);\r\n    \r\n    for (let key in data) {\r\n        proxy(vm, key, \"_data\");\r\n    }\r\n    \r\n    console.log(\"添加监控后data:\", data);\r\n    // data.arr.push(3);\r\n    // console.log(vm.arr);\r\n    // vm.arr[1].push(3);\r\n    // vm.name = {a: 2};\r\n    // vm.name.a = 20;\r\n    // vm.arr.push({a: 100});\r\n    // vm.arr[3].a = 200;\r\n}\r\n\r\nfunction proxy(vm, key, source) {\r\n    Object.defineProperty(vm, key, {\r\n        get() {\r\n            return vm[source][key];\r\n        },\r\n        set(newValue) {\r\n            vm[source][key] = newValue;\r\n        }\r\n    })\r\n}","// 用\"html\".match(new RegExp(ncname))匹配\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 匹配标签名，子模块aaa-bbb\r\n/*[\r\n    0: \"aa-bb\"\r\n    groups: undefined\r\n    index: 1\r\n    input: \"<aa-bb>2131</aa-bb>>\"\r\n    length: 1\r\n]*/\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; // 命名空间标签，aa:aa-xxx。很少用\r\n/*[\r\n    0: \"aa-bb\"\r\n    1: \"aa-bb\"\r\n    groups: undefined\r\n    index: 1\r\n    input: \"<aa-bb>2131</aa-bb>>\"\r\n    length: 2\r\n]*/\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 匹配<标签名和标签名，0: <aa:aa-xxx或<aa-aa, 1: aa:aa-xxx或aa-aa\r\n/*[\r\n    0: \"<aa-bb\"\r\n    1: \"aa-bb\"\r\n    groups: undefined\r\n    index: 0\r\n    input: \"<aa-bb>2131</aa-bb>\"\r\n    length: 2\r\n]*/\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性, 见下\r\n/*{\r\n    0: \"title = 123\"    // 完整字符串\r\n    1: \"title\"      // key\r\n    2: \"=\"          // 等号\r\n    3: undefined    // 双引号\r\n    4: undefined    // 单引号\r\n    5: \"123\"        // 无引号\r\n    groups: undefined\r\n    index: 0\r\n    input: \"title = 123></aa-bb>\"\r\n    length: 6\r\n}*/\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束, >或/>\r\n/*{\r\n    0: \"/>\"\r\n    1: \"/\"\r\n    groups: undefined\r\n    index: 0\r\n    input: \"/>32323\"\r\n    length: 2\r\n}*/\r\n// const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // // 匹配文本, {{message}}\r\n/*{\r\n    0: \"{{message}}\"\r\n    length: 1\r\n}*/\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结束 0: </aa-bb>, 1: aa-bb\r\n/*{\r\n    0: \"</aa-bb>\"\r\n    1: \"aa-bb\"\r\n    groups: undefined\r\n    index: 0\r\n    input: \"</aa-bb>\"\r\n    length: 2\r\n}*/\r\n\r\n// 生成ast树\r\nexport function parserHTML(html) {\r\n    let stack = [];\r\n    let root = null;\r\n    function start(tagName, attrs) {\r\n        let parent = stack[stack.length - 1];\r\n        let element = createASTElement(tagName, attrs, parent);\r\n        if (root === null) {\r\n            root = element;\r\n        }\r\n\r\n        if (parent) {\r\n            element.parent = parent;\r\n            parent.children.push(element);\r\n        }\r\n\r\n        stack.push(element);\r\n    }\r\n    function text(chars) {\r\n        let parent = stack[stack.length - 1];\r\n        chars.replace(/\\s/g, \"\"); // 替换空格\r\n        if(chars) {\r\n            parent.children.push({\r\n                type: 2,\r\n                text:chars\r\n            })\r\n        }\r\n    }\r\n    function end(tagName) {\r\n        let endTag = stack.pop();\r\n        if(endTag.tag != tagName) {\r\n            console.log(\"标签出错\");\r\n        }\r\n    }\r\n    function advance(len) {\r\n        html = html.substring(len);\r\n    }\r\n    function parseStartTag() {\r\n        const start = html.match(startTagOpen);\r\n        if (start) {\r\n            // 匹配到开始标签\r\n            const match = {\r\n                tagName: start[1],\r\n                attrs: []\r\n            }\r\n            advance(start[0].length);\r\n\r\n            // 匹配属性\r\n            let end,\r\n                attr\r\n            while(!(end = html.match(startTagClose)) && (attr = html.match(attribute))) { // 顺序不能反\r\n                match.attrs.push({\r\n                    name: attr[1],\r\n                    value: attr[3] || attr[4] || attr[5]\r\n                })\r\n                advance(attr[0].length);\r\n            }\r\n            if (end) {\r\n                advance(end[0].length)\r\n            }\r\n\r\n            return match;\r\n            /*\r\n            {\r\n                tagName: div,\r\n                attrs: [\r\n                    {title: 123}\r\n                ]\r\n            }\r\n            */\r\n        }\r\n        return false;\r\n    }\r\n    function createASTElement(tag, attrs, parent) {\r\n        return {\r\n            tag,\r\n            attrs,\r\n            parent,\r\n            type: 1,\r\n            children: []\r\n        }\r\n    }\r\n\r\n    while(html) {\r\n        let index = html.indexOf(\"<\");\r\n        if (index === 0) {\r\n            // 开始标签\r\n            const startTagMatch = parseStartTag(html); // 拿到开始标签的名称和属性，开始构建ast\r\n            if (startTagMatch) {\r\n                start(startTagMatch.tagName, startTagMatch.attrs);\r\n                continue;\r\n            }\r\n            // 结束标签\r\n            let endTagMatch\r\n            if(endTagMatch = html.match(endTag)) {\r\n                end(endTagMatch[1]);\r\n                advance(endTagMatch[0].length)\r\n                continue;\r\n            }\r\n            break;\r\n        }\r\n        // 文本\r\n        if (index > 0) {\r\n            let chars = html.substring(0, index);\r\n            text(chars);\r\n            advance(chars.length);\r\n        }\r\n    }\r\n\r\n    return root;\r\n}","let defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // 匹配文本, {{message}}\r\n/*{\r\n    0: \"{{message}}\"\r\n    length: 1\r\n}*/\r\n\r\nexport function generate(ast) {\r\n    // 2.处理子组件\r\n    let children = genChildren(ast);\r\n\r\n    // 1.处理第一层div\r\n    let code =\r\n        `_c(\"${ast.tag}\",\r\n            ${\r\n                ast.attrs.length ? genProps(ast.attrs) : \"undefined\"\r\n            }\r\n            ${\r\n                children ? `,${children}` : \"\"\r\n            }\r\n        )`;\r\n    return code\r\n}\r\n\r\nfunction genChildren(el) {\r\n    let children = el.children;\r\n    if (children) {\r\n        // 要分类讨论，1.普通文本 2.{{文本}} 3.子标签span/div\r\n        return children.map(item => gen(item)).join(\",\");\r\n    }\r\n    return false\r\n}\r\n\r\nfunction gen(el) {\r\n    if (el.type == 1) {\r\n        // 3.子标签span/div\r\n        return generate(el);\r\n    }else {\r\n        // 1.只有普通文本\r\n        let text = el.text;\r\n        if (!defaultTagRE.test(text)) return `_v(\"${text}\")`;\r\n        defaultTagRE.lastIndex = 0; // ★ /g正则调用test()和exec()lastIndex都会往后\r\n\r\n        //  2.普通文本 + {{文本}}\r\n        let lastIndex = 0;\r\n        let tokens = [];\r\n        let match;\r\n        while(match = defaultTagRE.exec(text)) {\r\n            // ★ exec和正则的/g要注意，/g会让 defaultTagRE的lastIndex 往后一位\r\n            // 如<p>aa {{bb}} cc {{dd}}</p>\r\n            // 第一次是匹配到aa {{bb}}\r\n            let index = match.index;\r\n            if (index > lastIndex) {\r\n                tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n            }\r\n            tokens.push(`_s(${match[1].trim()})`);  // 1 -- name\r\n            lastIndex = index + match[0].length;    // 0 -- {{name}}\r\n        }\r\n        if (lastIndex < text.length) { // 匹配最后的普通文本bb， aa {{name}} bb\r\n            tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n        }\r\n\r\n        return `_v(${tokens.join(\" + \")})`\r\n    }\r\n}\r\n\r\n\r\n\r\n/**\r\n * 生成属性字符串\r\n * @param attrs\r\n * @returns {string} 返回 {id:\"app\",style:{\"font-size\":\"18px\",\"color\":\"#ccc\"}}\r\n */\r\nfunction genProps(attrs) {\r\n    let str = \"\";\r\n\r\n    for (let i = 0; i < attrs.length; i++) {\r\n        let attr = attrs[i];\r\n        if (attr.name === \"style\") {\r\n            let styles = {}\r\n            attr.value.replace(/([^;:]+):([^;:]+)/g, function (...args) {\r\n                styles[args[1].trim()] = args[2].trim();\r\n            })\r\n            attr.value = styles;\r\n        }\r\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n    }\r\n\r\n    return `{${str.slice(0, -1)}}`;\r\n}\r\n/*\r\n* replace方法返回的arcgument\r\n* {\r\n*   0: \"color:123\"\r\n*   1: \"color\"\r\n*   2: \"123\"\r\n*   3: 0\r\n*   4: \"color:123;color:123\"\r\n*   length: 5\r\n* }\r\n*\r\n* */\r\n\r\n\r\n","import {parserHTML} from \"./parser\";\r\nimport {generate} from \"./generate\";\r\n\r\nexport function compilerToFunction(template) {\r\n    console.log(\"template:\", template);\r\n\r\n    let ast = parserHTML(template);\r\n    console.log(\"ast:\", ast);\r\n\r\n    let code = generate(ast);\r\n    console.log(\"code:\", code);\r\n\r\n    let render = new Function(`with(this) {return ${code}}`);\r\n    console.log(\"render:\", render.toString());\r\n\r\n    return render;\r\n}\r\n\r\n/*\r\n示例:AST格式\r\n\r\n{\r\nparent: undefined\r\ntag: \"div\"\r\ntype: 1\r\nattrs: Array(2)\r\n    0: {name: \"id\", value: \"app\"}\r\n    1: {name: \"style\", value: \"font-size: 18px; color: #ccc\"}\r\n    length: 2\r\n    __proto__: Array(0)\r\nchildren: Array(2)\r\n    0: {type: 2, text: \" aa {{name}} bb \"}\r\n    1: {tag: \"span\", attrs: Array(0), parent: {…}, type: 1, children: Array(1)}\r\n    length: 2\r\n    __proto__: Array(0)\r\n}\r\n*/","export function patch(oldVnode, vnode) {\r\n    const parentNode = oldVnode.parentNode;\r\n    const elm = createElm(vnode);\r\n    parentNode.insertBefore(elm, oldVnode.nextSibing);\r\n    parentNode.removeChild(oldVnode);\r\n    return elm;\r\n}\r\n\r\nfunction createElm(vnode) {\r\n    let {tag, data, children, text, vm} = vnode;\r\n\r\n    if(typeof tag === \"string\"){\r\n        vnode.el = document.createElement(tag);\r\n        updateProperties(vnode.el, data);\r\n        children.forEach(child => {\r\n            vnode.el.appendChild(createElm(child));\r\n        })\r\n    }else {\r\n        vnode.el = document.createTextNode(text);\r\n    }\r\n\r\n    return vnode.el;\r\n}\r\n\r\nfunction updateProperties(el, props={}) {\r\n    // 边界问题: 样式\r\n    for(let key in props) {\r\n        el.setAttribute(key, props[key]);\r\n    }\r\n}","import {Dep} from \"./dep\";\r\n\r\nlet id = 0;\r\n\r\nexport class Watcher {\r\n    constructor(vm, fn, cb, options) {\r\n        this.vm = vm;\r\n        this.fm = fn;\r\n        this.cb = cb;\r\n        this.options = options; // 是否渲染watcher\r\n        this.id = id++;\r\n        this.depIds = new Set();\r\n        this.deps = [];\r\n        this.getter = fn;\r\n\r\n        this.get();\r\n    }\r\n\r\n    get() {     // 初始化\r\n        Dep.target = this; // window.target = watcher\r\n        this.getter();\r\n        Dep.target = null;\r\n    }\r\n    update() {  // 更新\r\n        this.get();\r\n    }\r\n    addDep(dep) {\r\n        let did = dep.id;\r\n        if(!this.depIds.has(did)) { // 这里实现dep.ids的去重和watcher.deps去重\r\n            this.depIds.add(did);\r\n            this.deps.push(dep); // 保存id并让watcher记住dep\r\n            dep.addSub(this);\r\n        }\r\n    }\r\n}","import {patch} from \"./vdom/patch\";\r\nimport {Watcher} from \"./observe/watcher\";\r\n\r\nexport function mountComponent(vm) {\r\n    // let vnode = vm._render();\r\n    // console.log(\"vnode:\", vnode);\r\n    // vm._update(vnode);\r\n\r\n    // 组件更新函数\r\n    let updateComponent = () => {\r\n        vm._update(vm._render()); // render -> vnode -> real DOM\r\n    }\r\n\r\n    new Watcher(vm, updateComponent, () => { // render -> getter -> watcher\r\n        console.log(\"更新钩子 update\")\r\n    }, true);\r\n}\r\n\r\nexport function lifCycleMixin(Vue) {\r\n    Vue.prototype._update = function (vnode) {\r\n        const vm = this;\r\n        vm.$el = patch(vm.$el, vnode);\r\n    }\r\n}","import {initState} from \"./state\";\r\nimport {compilerToFunction} from \"./compiler\";\r\nimport {mountComponent} from \"./lifeCycle\";\r\n\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        const vm = this;\r\n        vm.$options = options;\r\n\r\n        initState(vm);\r\n\r\n        if (vm.$options.el) {\r\n            vm.$mount(vm.$options.el);\r\n        }\r\n    }\r\n\r\n    Vue.prototype.$mount = function (el) {\r\n        const vm = this;\r\n        const opts = vm.$options;\r\n        el = document.querySelector(el);\r\n        vm.$el = el;\r\n\r\n        if (!opts.render) {\r\n            let template = opts.template;\r\n            if (!opts.template) {\r\n                template = el.outerHTML;\r\n            }\r\n            let render = compilerToFunction(template);\r\n            opts.render = render;\r\n        }\r\n\r\n        mountComponent(vm);\r\n    }\r\n}\r\n\r\n/*\r\n示例:render函数\r\n\r\nfunction render() {\r\n  with(this) {\r\n    return _c('div', {\r\n      attrs: {\r\n        \"id\": \"app\"\r\n      }\r\n    }, [_v(\"aa \" + _s(msg) + \" cc \"), _c('p', [_v(\"cc\")])])\r\n  }\r\n}\r\n*/\r\n","export function createElement(vm, tag, data={},...children) {\r\n    return vnode(vm, tag, data, children, data.key, undefined);\r\n}\r\n\r\nexport function createText(vm, text) {\r\n    return vnode(vm, undefined, undefined, undefined, undefined, text);\r\n}\r\n\r\nfunction vnode(vm, tag, data, children, key, text) { // key用于之后做diff\r\n    return {\r\n        vm,\r\n        tag,\r\n        data,\r\n        children,\r\n        key,\r\n        text\r\n    }\r\n}","import {isObject} from \"./utils\";\r\nimport {createElement, createText} from \"./vdom\";\r\n\r\nexport function renderMixin(Vue) {\r\n    Vue.prototype._render = function() {\r\n        const vm = this;\r\n        let {render} = vm.$options;\r\n        let vnode = render.call(vm);\r\n        return vnode;\r\n    }\r\n    Vue.prototype._c = function() {\r\n        const vm = this;\r\n        return createElement(vm, ...arguments);\r\n    }\r\n    Vue.prototype._v = function(text) { // 创建文本的虚拟节点\r\n        const vm = this;\r\n        return createText(vm, text);\r\n    }\r\n    Vue.prototype._s = function(val) {\r\n        if(isObject(val)) return JSON.stringify(val);\r\n        return val;\r\n    }\r\n}","import {initMixin} from \"./init\";\r\nimport {renderMixin} from \"./render\";\r\nimport {lifCycleMixin} from \"./lifeCycle\";\r\n\r\nfunction Vue(option) {\r\n    this._init(option);\r\n}\r\n\r\ninitMixin(Vue);\r\nrenderMixin(Vue);\r\nlifCycleMixin(Vue);\r\n\r\nexport default Vue;\r\n"],"names":["isFunction","val","isObject","isArray","Array","oldArrayPrototype","prototype","arrayMethods","Object","create","methods","forEach","method","args","call","inserted","ob","__ob__","slice","observeArray","id","Dep","constructor","subs","depend","target","addDep","addSub","watcher","push","notify","update","observe","value","Observer","defineProperty","enumerable","__proto__","walk","data","keys","key","defineReactive","item","obj","dep","get","set","newValue","initState","vm","opts","$options","initData","_data","proxy","console","log","source","ncname","qnameCapture","startTagOpen","RegExp","attribute","startTagClose","endTag","parserHTML","html","stack","root","start","tagName","attrs","parent","length","element","createASTElement","children","text","chars","replace","type","end","pop","tag","advance","len","substring","parseStartTag","match","attr","name","index","indexOf","startTagMatch","endTagMatch","defaultTagRE","generate","ast","genChildren","code","genProps","el","map","gen","join","test","lastIndex","tokens","exec","JSON","stringify","trim","str","i","styles","compilerToFunction","template","render","Function","toString","patch","oldVnode","vnode","parentNode","elm","createElm","insertBefore","nextSibing","removeChild","document","createElement","updateProperties","child","appendChild","createTextNode","props","setAttribute","Watcher","fn","cb","options","fm","depIds","Set","deps","getter","did","has","add","mountComponent","updateComponent","_update","_render","lifCycleMixin","Vue","$el","initMixin","_init","$mount","querySelector","outerHTML","undefined","createText","renderMixin","_c","arguments","_v","_s","option"],"mappings":"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"}